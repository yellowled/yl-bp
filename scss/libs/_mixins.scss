// MIXINS
// --------------------------------------------------------------------
// Context-sensitive conversion of pixels to ems
@function px-to-em($px, $context: 16px) {
	@return ($px / $context) * 1em;
}

// Courtesy of @drublic, https://github.com/drublic/Sass-Mixins/
@mixin x-rem($property, $values, $main-font-size: 16px) {
    // Empty list for all values in px
    $px-values: ();
    $rem-values: ();
    // Iterate over entries
    @each $value in $values {
        // If the value is zero, return 0
        @if $value == 0 or $value == auto {
            $px-values: append($px-values, $value);
            $rem-values: append($rem-values, $value);
        // If the value is not zero, convert it from px to rem
        } @else {
            $px-values: append($px-values, ($value * $main-font-size) );
            $rem-values: append($rem-values, #{$value}rem);
        }
    }
    // Return the property and its list of converted values
    #{$property}: #{$px-values};
    #{$property}: #{$rem-values};
}

// CSS ligatures
@mixin ligatures {
    -moz-font-feature-settings: "liga=1, dlig=1";
    -ms-font-feature-settings: "liga", "dlig";
    -webkit-font-feature-settings: "liga", "dlig";
    -o-font-feature-settings: "liga", "dlig";
    font-feature-settings: "liga", "dlig";
}

// inline-block with IE7 legacy support
@mixin inblock-level {
    display: inline-block;
    @if $ie7-support {
        *display: inline;
        *zoom: 1;
    }
}

// For blockquotes
// http://html5doctor.com/blockquote-q-cite/
@mixin smart-blockquotes {
    & p {
        quotes: '“' '”';
    }

    & p:before {
        content: '';
        content: no-open-quote;
    }

    & p:after {
        content: '';
        content: no-close-quote;
    }

    & p:first-of-type:before {
        content: '“';
        content: open-quote;
    }

    & p:last-of-type:after {
        content: '”';
        content: close-quote;
    }

    :lang(de) & p,
    &:lang(de) p {
        quotes: '„' '“';
    }

    :lang(de) & p:before,
    &:lang(de)  p:before {
        content: '';
        content: no-open-quote;
    }

    :lang(de) & p:after,
    &:lang(de)  p:after {
        content: '';
        content: no-close-quote;
    }

    :lang(de) & p:first-of-type:before,
    &:lang(de)  p:first-of-type:before {
        content: '„';
        content: open-quote;
    }

    :lang(de) & p:last-of-type:after,
    &:lang(de)  p:last-of-type:after {
        content: '“';
        content: close-quote;
    }

    // Quote source attribution
    & > small,
    & + small,
    & + figcaption {
        display: block;
        font-size: 100%;

        &:before { content: "– "; }
    }

    & > small { margin: 1em 0; }

    & + small,
    & + figcaption { margin: 1em 0 1em 40px; }
}
